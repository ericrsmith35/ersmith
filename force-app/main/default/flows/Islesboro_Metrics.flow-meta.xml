<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>All_Accounts</name>
        <label>All Accounts</label>
        <locationX>128</locationX>
        <locationY>143</locationY>
        <actionName>FlowAccountCollectionSize</actionName>
        <actionType>apex</actionType>
        <inputParameters>
            <name>FlowCollectionSet</name>
            <value>
                <elementReference>colAccounts</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>vAllCount</assignToReference>
            <name>CollectionSize</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Data_Assets</name>
        <label>Data Assets</label>
        <locationX>132</locationX>
        <locationY>374</locationY>
        <actionName>FlowAssetCollectionSize</actionName>
        <actionType>apex</actionType>
        <inputParameters>
            <name>FlowCollectionSet</name>
            <value>
                <elementReference>colDataAssets</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>vDataActive</assignToReference>
            <name>CollectionSize</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Voice_Accounts</name>
        <label>Voice Accounts</label>
        <locationX>132</locationX>
        <locationY>255</locationY>
        <actionName>FlowAccountCollectionSize</actionName>
        <actionType>apex</actionType>
        <inputParameters>
            <name>FlowCollectionSet</name>
            <value>
                <elementReference>colVAccounts</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>vVoiceCount</assignToReference>
            <name>CollectionSize</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Voice_Assets</name>
        <label>Voice Assets</label>
        <locationX>133</locationX>
        <locationY>491</locationY>
        <actionName>FlowAssetCollectionSize</actionName>
        <actionType>apex</actionType>
        <inputParameters>
            <name>FlowCollectionSet</name>
            <value>
                <elementReference>colVoiceAssets</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>vVoiceActive</assignToReference>
            <name>CollectionSize</name>
        </outputParameters>
    </actionCalls>
    <assignments>
        <name>All_Accounts_18</name>
        <label>All Accounts</label>
        <locationX>330</locationX>
        <locationY>144</locationY>
        <assignmentItems>
            <assignToReference>vAllCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>colAccounts</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Islesboro_Voice_Accounts</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Data_Assets_18</name>
        <label>Data Assets</label>
        <locationX>335</locationX>
        <locationY>372</locationY>
        <assignmentItems>
            <assignToReference>vDataActive</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>colDataAssets</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Voice_Assets</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Do_Nothing</name>
        <label>Do Nothing</label>
        <locationX>327</locationX>
        <locationY>29</locationY>
        <assignmentItems>
            <assignToReference>dummy</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>Get_All_Islesboro_Accounts</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Incr_Counter</name>
        <label>Incr Counter</label>
        <locationX>1057</locationX>
        <locationY>147</locationY>
        <assignmentItems>
            <assignToReference>vAllCount</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Count_Records</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Incr_Counter_0</name>
        <label>Incr Counter</label>
        <locationX>1059</locationX>
        <locationY>260</locationY>
        <assignmentItems>
            <assignToReference>vVoiceCount</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Count_Records_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Incr_Counter_0_0</name>
        <label>Incr Counter</label>
        <locationX>880</locationX>
        <locationY>373</locationY>
        <assignmentItems>
            <assignToReference>vDataActive</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Count_Records_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Incr_Counter_0_0_0</name>
        <label>Incr Counter</label>
        <locationX>884</locationX>
        <locationY>490</locationY>
        <assignmentItems>
            <assignToReference>vVoiceActive</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Count_Records_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Voice_Accounts_18</name>
        <label>Voice Accounts</label>
        <locationX>333</locationX>
        <locationY>261</locationY>
        <assignmentItems>
            <assignToReference>vVoiceCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>colVAccounts</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Data_Assets</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Voice_Assets_18</name>
        <label>Voice Assets</label>
        <locationX>340</locationX>
        <locationY>492</locationY>
        <assignmentItems>
            <assignToReference>vVoiceActive</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>colVoiceAssets</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Display_Results</targetReference>
        </connector>
    </assignments>
    <constants>
        <description>Islesboro System ID Name</description>
        <name>Islesboro</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Islesboro - FttP</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Check_Removed</name>
        <label>Check Removed</label>
        <locationX>884</locationX>
        <locationY>79</locationY>
        <defaultConnectorLabel>DELETED</defaultConnectorLabel>
        <rules>
            <name>VALID</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>fNotDeleted</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Incr_Counter</targetReference>
            </connector>
            <label>VALID</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Removed_0</name>
        <label>Check Removed</label>
        <locationX>888</locationX>
        <locationY>214</locationY>
        <defaultConnectorLabel>DELETED</defaultConnectorLabel>
        <rules>
            <name>VALID_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>fNotDeleted</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Incr_Counter_0</targetReference>
            </connector>
            <label>VALID</label>
        </rules>
    </decisions>
    <description>5/16/18 - ers - Islesboro System ID changed to Islesboro - FttP
6/11/18 - ers - Use Summer &#39;18 collection count operator instead of custom Apex</description>
    <formulas>
        <name>fNotDeleted</name>
        <dataType>Boolean</dataType>
        <expression>FIND(&quot;*** DELETED&quot;,{!objAccount.Description})=0</expression>
    </formulas>
    <interviewLabel>Islesboro Metrics {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Islesboro Metrics</label>
    <loops>
        <name>Count_Records</name>
        <label>Count Records</label>
        <locationX>707</locationX>
        <locationY>149</locationY>
        <assignNextValueToReference>objAccount</assignNextValueToReference>
        <collectionReference>colAccounts</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Incr_Counter</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_Islesboro_Voice_Accounts</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Count_Records_0</name>
        <label>Count Records</label>
        <locationX>710</locationX>
        <locationY>260</locationY>
        <assignNextValueToReference>objAccount</assignNextValueToReference>
        <collectionReference>colVAccounts</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Incr_Counter_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_Data_Assets</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Count_Records_0_0</name>
        <label>Count Records</label>
        <locationX>712</locationX>
        <locationY>372</locationY>
        <assignNextValueToReference>objAsset</assignNextValueToReference>
        <collectionReference>colDataAssets</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Incr_Counter_0_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_Voice_Assets</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Count_Records_0_0_0</name>
        <label>Count Records</label>
        <locationX>715</locationX>
        <locationY>490</locationY>
        <assignNextValueToReference>objAsset</assignNextValueToReference>
        <collectionReference>colVoiceAssets</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Incr_Counter_0_0_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Display_Results</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processType>Flow</processType>
    <recordLookups>
        <name>Get_All_Islesboro_Accounts</name>
        <label>Get All Islesboro Accounts</label>
        <locationX>520</locationX>
        <locationY>146</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>All_Accounts_18</targetReference>
        </connector>
        <filters>
            <field>Hierarchy_Tier__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>I</stringValue>
            </value>
        </filters>
        <filters>
            <field>System_ID_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Islesboro</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputReference>colAccounts</outputReference>
        <queriedFields>Description</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Data_Assets</name>
        <label>Get Data Assets</label>
        <locationX>521</locationX>
        <locationY>372</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Data_Assets_18</targetReference>
        </connector>
        <filters>
            <field>Account_s_System_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Islesboro</elementReference>
            </value>
        </filters>
        <filters>
            <field>IsDeleted</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>Contains</operator>
            <value>
                <stringValue>Residential Internet</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Active</stringValue>
            </value>
        </filters>
        <object>Asset</object>
        <outputReference>colDataAssets</outputReference>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Islesboro_Voice_Accounts</name>
        <label>Get Islesboro Voice Accounts</label>
        <locationX>521</locationX>
        <locationY>259</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Voice_Accounts_18</targetReference>
        </connector>
        <filters>
            <field>Hierarchy_Tier__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>I</stringValue>
            </value>
        </filters>
        <filters>
            <field>IsDeleted</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Plat_ID__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue/>
            </value>
        </filters>
        <filters>
            <field>System_ID_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Islesboro</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputReference>colVAccounts</outputReference>
        <queriedFields>Description</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Voice_Assets</name>
        <label>Get Voice Assets</label>
        <locationX>522</locationX>
        <locationY>493</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Voice_Assets_18</targetReference>
        </connector>
        <filters>
            <field>Account_s_System_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Islesboro</elementReference>
            </value>
        </filters>
        <filters>
            <field>IsDeleted</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>Contains</operator>
            <value>
                <stringValue>Residential Unlimited</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Active</stringValue>
            </value>
        </filters>
        <object>Asset</object>
        <outputReference>colVoiceAssets</outputReference>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
    </recordLookups>
    <screens>
        <name>Display_Results</name>
        <label>Display Results</label>
        <locationX>528</locationX>
        <locationY>632</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Results</name>
            <fieldText>Total Accounts: {!vAllCount}
Active Data Accounts: {!vDataActive}

Requested Phone Service: {!vVoiceCount}
Active Voice Lines: {!vVoiceActive}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <startElementReference>Get_All_Islesboro_Accounts</startElementReference>
    <status>Active</status>
    <variables>
        <name>colAccounts</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>colDataAssets</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Asset</objectType>
    </variables>
    <variables>
        <name>colVAccounts</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>colVoiceAssets</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Asset</objectType>
    </variables>
    <variables>
        <name>dummy</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>objAccount</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>objAsset</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Asset</objectType>
    </variables>
    <variables>
        <name>vAllCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vDataActive</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vVoiceActive</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vVoiceCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
</Flow>
